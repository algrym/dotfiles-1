#!/bin/sh
# Author: Andreas Louv <andreas@louv.dk>
# Chromium Session Less
# This program opens chromium with a new data directory every time, this means
# that everytime this program is started it will not share any sessions, etc
# with any other instance of chromium
readonly pgm=${0##*/}
readonly data_dir=$(mktemp -dt "$pgm-XXXXXXXXXX")

trap 'rm -r "$data_dir" 2> /dev/null' EXIT INT

# Prevent first run help page
touch "$data_dir/First Run"

# Disable plugins by default
mkdir -p "$data_dir/Default"
echo '{"profile":{"default_content_setting_values":{"plugins":2}}}' > "$data_dir/Default/Preferences"
chromium --user-data-dir="$data_dir" "$@"
