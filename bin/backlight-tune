#!/bin/sh
# Author: Andreas Louv <andreas@louv.dk>

[ "$#" -lt 1 ] && { >&2 printf "Usage '%s +inc'\n" "${0##*/}"; exit 2; }

readonly min=20
readonly max=$(cat /sys/class/backlight/intel_backlight/max_brightness)

inc=$1; shift
inc=$((inc * max / 100))
file=/sys/class/backlight/intel_backlight/brightness
cat "$file"
current=$(cat "$file")
next=$((inc + current))

[ "$next" -lt "$min" ] && next="$min"
[ "$next" -gt "$max" ] && next="$max"

echo "$next" > "$file"
